<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ggOceanMaps User Manual • ggOceanMaps</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ggOceanMaps User Manual">
<meta property="og:description" content="ggOceanMaps">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggOceanMaps</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ggOceanMaps.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/premade-shapefiles.html">Pre-made shapefiles</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/MikkoVihtakari/ggOceanMaps/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ggOceanMaps_files/header-attrs-2.1/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>ggOceanMaps User Manual</h1>
                        <h4 class="author">Mikko Vihtakari (Institute of Marine Research)</h4>
            
            <h4 class="date">05 June, 2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MikkoVihtakari/ggOceanMaps/blob/master/vignettes/ggOceanMaps.Rmd"><code>vignettes/ggOceanMaps.Rmd</code></a></small>
      <div class="hidden name"><code>ggOceanMaps.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggOceanMaps</span>)</pre></body></html></div>
<p>The ggOceanMaps package for <a href="https://www.r-project.org/">R</a> allows plotting data on bathymetric maps using <a href="https://ggplot2.tidyverse.org/reference">ggplot2</a>. The package is designed for ocean sciences and greatly simplifies bathymetric map plotting anywhere around the globe. ggOceanMaps uses openly available geographic data. Citing the particular data sources is advised by the CC-BY licenses whenever maps from the package are published (see the <a href="#citations-and-data-sources"><em>Citations and data sources</em></a> section). Due to the package size limitations, ggOceanMaps depends on the <a href="https://github.com/MikkoVihtakari/ggOceanMapsData">ggOceanMapsData</a> package which stores the shapefiles. Note that the package comes with absolutely no warranty and that maps generated by the package are meant for plotting scientific data only. The maps are coarse generalizations of third party data and therefore inaccurate.</p>
<div id="basic-use" class="section level1">
<h1 class="hasAnchor">
<a href="#basic-use" class="anchor"></a>Basic use</h1>
<p><strong>ggOceanMaps</strong> extends on <a href="http://ggplot2.tidyverse.org/reference/"><strong>ggplot2</strong></a>. Data that contain geographic information can be plotted on the maps generated by ggOceanMaps using the ggplot2 layers separated by the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> operator. The package uses spatial shapefiles, <a href="https://CRAN.R-project.org/view=Spatial">GIS packages for R</a> to manipulate, and the <a href="https://CRAN.R-project.org/package=ggspatial"><strong>ggspatial</strong></a> package to help to plot these shapefiles. The shapefile plotting is conducted internally in the <code>basemap</code> function and uses <a href="https://ggplot2.tidyverse.org/reference/ggsf.html">ggplot’s sf object plotting capabilities</a>.</p>
<p>The primary aim of ggOceanMaps is to make plotting oceanographic spatial data as simple as feasible, but also flexible for custom modifications. The “as simple as feasible” part will be covered in this section, while the “flexible for custom modifications” part is covered in the <a href="#advanced-use">Advanced use</a> section. The basic use section of this tutorial assumes that the user knows how to use ggplot. If you are not familiar with this package, you may read the <a href="https://r4ds.had.co.nz/data-visualisation.html">Data visualization</a> section in <a href="https://r4ds.had.co.nz/">Hadley Wickham &amp; Garrett Grolemund</a>. This tutorial does not describe functions in ggOceanMaps but rather focusses on how to use them. Make sure to refer to the function documentation while reading the tutorial.</p>
<div id="limits" class="section level2">
<h2 class="hasAnchor">
<a href="#limits" class="anchor"></a>Limits</h2>
<p>To ensure simplicity, ggOceanMaps package attempts to use <a href="https://en.wikipedia.org/wiki/Decimal_degrees">decimal degree</a> <a href="https://en.wikipedia.org/wiki/Coordinate_system">coordinate system</a> as much as possible. This system represents coordinates on a sphere, while maps are plotted in two dimensions. Therefore, the underlying map data have to be projected using <a href="#projections">different mathematical algorithms depending on the geographic location</a>. The simplest way of defining the geographic location is to use the <code>limits</code> argument with decimal degrees. The limits argument can be defined either as a numeric vector of length 1 or 4. Specifying the argument as a single integer between 30 and 88 or -88 and -30 plots a polar stereographic map for the Arctic or Antarctic, respectively.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggOceanMaps</span>)
<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fl">60</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<p>Rectangular maps are plotted by specifying the <code>limits</code> argument as a numeric vector of length 4 where the first element defines the start longitude, the second element the end longitude, the third element the minimum latitude and the fourth element the maximum latitude of the bounding box:</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">20</span>, <span class="fl">20</span>, <span class="fl">40</span>, <span class="fl">59</span>))</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>Limiting maps using decimal degrees is somewhat counter-intuitive because maps plotted for polar regions (&gt;= 60 or &lt;= -60 latitude) are actually projected to Arctic and Antarctic polar stereographic systems. Because decimal degrees are angular units running counter-clockwise, also the longitude limits have to be defined <strong>counter-clockwise</strong>. Projected maps with decimal degree <code>limits</code> will lead to expanded limits towards the poles when using Arctic and Atlantic Polar Stereographic projections because decimal degrees represent a sphere:</p>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-4-1.png" width="960"></p>
<p>The figure above: Limiting rectangular basemaps is done by placing four coordinates to the limit argument. A) If the limits are in decimal degrees, the longitude limits (<code>[1:2]</code>) specify the start and end segments of corresponding angular lines that should reside inside the map area. The longitude limits are defined <strong>counter-clockwise</strong>. The latitude limits <code>[3:4]</code> define the parallels that should reside inside the limited region given the longitude segments. Note that the resulting limited region (polygon with thick red borders) becomes wider than the polygon defined by the coordinates (thin red borders). The example limits are <code><a href="https://rdrr.io/r/base/c.html">c(120, -120, 60, 80)</a></code>. B) If the limits are given as projected coordinates or as decimal degrees for maps with |latitude| &lt; 60, limits elements represent lines encompassing the map area in cartesian space. The example limits are the limits from A) projected to the Arctic stereographic (crs = 3995). When limiting basemaps using data, the limits are calculated for the maximum reach of projected coordinates as in B but with an added buffer to place all points inside the map area.</p>
<p>As an example:</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">lon</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">160</span>, <span class="fl">160</span>, -<span class="fl">160</span>, -<span class="fl">160</span>), <span class="kw">lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">60</span>, <span class="fl">80</span>, <span class="fl">80</span>, <span class="fl">60</span>))

<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">160</span>, -<span class="fl">160</span>, <span class="fl">60</span>, <span class="fl">80</span>)) +
  <span class="fu">geom_spatial_polygon</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">lon</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">lat</span>), <span class="kw">fill</span> <span class="kw">=</span> <span class="fl">NA</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>Exact control of map limits can be difficult using decimal degree limits in polar regions. The <code>limits</code> argument also allows specifying the limits in the underlying projected coordinate units. First, we will need to find out how these units look like:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fl">60</span>, <span class="kw">projection.grid</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">grid.col</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>The <code>projection.grid</code> argument plots a grid using the projected actual map coordinates instead of decimal degrees. The grid helps in defining the <code>limits</code> using projected coordinates giving better control over the map limits than decimal degree coordinates. The automatic shapefile definition algorithm does not work for projected coordinates. Therefore, if the limits are not given as decimal degrees (any longitude outside the range [-180, 180] or latitude [-90, 90]), the function asks to specify <code>shapefiles</code>. The <code>shapefiles</code> can be defined by partially matching the names of the pre-made shapefiles in <code>shapefile_list</code> (e.g. “Ar” would be enough for “ArcticStereographic”):</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">2e6</span>, <span class="fl">1e6</span>, <span class="fl">0</span>, <span class="fl">3e6</span>), <span class="kw">shapefiles</span> <span class="kw">=</span> <span class="st">"Arctic"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div id="data-limits" class="section level2">
<h2 class="hasAnchor">
<a href="#data-limits" class="anchor"></a>Data limits</h2>
<p>The limits of a map can also be defined by inputting a data frame to the <code>data</code> argument. The limits are automatically defined allowing the user to quickly find limits for a desired spatial dataset:</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span>(<span class="kw">lon</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">160</span>, -<span class="fl">160</span>), <span class="kw">lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">60</span>, <span class="fl">80</span>))

<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>) +
  <span class="fu">geom_spatial_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">lon</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">lat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Note how the function expands the map to make all data fit inside the map area compared to a similar plot using the <code>limits</code> argument above. The function automatically detects columns containing longitude and latitude information. The automatic detection algorithm is not very advanced and it is recommended to use intuitive column names for longitude (such as “lon”, “long”, or “longitude”) and latitude (“lat”, “latitude”) columns. The coordinate data have to be given as decimal degrees for the <code>data</code> argument to function.</p>
</div>
<div id="bathymetry-and-glaciers" class="section level2">
<h2 class="hasAnchor">
<a href="#bathymetry-and-glaciers" class="anchor"></a>Bathymetry and glaciers</h2>
<p>It is advised to limit your map first and only then plot bathymetry and glaciers to save the processing time of your computer (the bathymetry shapes can be large). Bathymetry is plotted simply by specifying <code>bathymetry = TRUE</code>:</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">100</span>, <span class="fl">160</span>, -<span class="fl">20</span>, <span class="fl">30</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Glaciers can be plotted using the <code>glaciers</code> argument:</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fl">60</span>, <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
<div id="adding-data-to-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-data-to-maps" class="anchor"></a>Adding data to maps</h2>
<p>The <code><a href="../reference/basemap.html">basemap(...)</a></code> function works almost similarly to the <code>ggplot(...)</code> function as a base for adding further layers to the plot. The difference between the <code><a href="../reference/basemap.html">basemap()</a></code> and the <code>ggplot()</code> is that the <code><a href="../reference/basemap.html">basemap()</a></code> plot already contains multiple ggplot layers. All layers except bathymetry have no other <code>aes</code> mapping than <code>x</code>, <code>y</code> and <code>group</code>. Bathymetry is mapped to <code>fill</code> or <code>color</code> color in addition. This means that when you add ggplot layers, you need to specify the <code>data</code> argument explicitly as shown below. Another difference is that basemaps are plotted using projected coordinates. The <a href="https://CRAN.R-project.org/package=ggspatial">ggspatial</a> and ggplot’s <a href="https://ggplot2.tidyverse.org/reference/ggsf.html"><code>geom_sf</code></a> functions convert the coordinates automatically to the projected coordinates:</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">lon</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(-<span class="fl">180</span>, <span class="fl">0</span>, <span class="fl">30</span>), <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">30</span>, <span class="fl">180</span>, <span class="fl">30</span>)), <span class="kw">lat</span> <span class="kw">=</span> -<span class="fl">70</span>)
<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> -<span class="fl">60</span>, <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>) + <span class="fu">geom_spatial_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">lon</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">lat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>The ggplot functions can also be used, but the coordinates need to be transformed to the basemap projection first using the <code>transform_coord</code> function:</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> -<span class="fl">60</span>, <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu">geom_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="fu"><a href="../reference/transform_coord.html">transform_coord</a></span>(<span class="no">dt</span>), <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">lon</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">lat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>Note that the maps plotted in temperate and tropical regions are not projected. Consequently, decimal degrees work for such maps directly:</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">dt</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">lon</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">100</span>, -<span class="fl">80</span>, -<span class="fl">60</span>), <span class="kw">lat</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">25</span>, <span class="fl">40</span>), <span class="kw">var</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>))
<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>) + <span class="fu">geom_point</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">dt</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">lon</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">lat</span>), <span class="kw">color</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>The <code>transform_coord</code> function detects the projection automatically, given that the map is limited using a similar range of coordinates. Therefore you can use the <code>transform_coord</code> as demonstrated above whenever using standard ggplot layers.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/transform_coord.html">transform_coord</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">lon</span> <span class="kw">=</span> -<span class="fl">80</span>, <span class="kw">lat</span> <span class="kw">=</span> <span class="fl">25</span>), <span class="kw">bind</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
<span class="co">#&gt;   lon lat lon.proj lat.proj</span>
<span class="co">#&gt; 1 -80  25      -80       25</span></pre></body></html></div>
</div>
<div id="rotating-maps" class="section level2">
<h2 class="hasAnchor">
<a href="#rotating-maps" class="anchor"></a>Rotating maps</h2>
<p>The stereographic maps can be rotated to point towards north using the <code>rotate</code> argument:</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">160</span>, -<span class="fl">80</span>, <span class="fl">60</span>, <span class="fl">85</span>), <span class="kw">rotate</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>A word of warning, however: the rotation involves reprojecting all shapefiles in their entirety and is memory consuming especially for large bathymetry shapes. Make sure to limit your map correctly before you add bathymetry. The rotation is still experimental and does not work for <code>limit</code>s defined using projected coordinates or <code>data</code>. This functionality is likely to contain a whole lot of bugs. Rotation does not currently work within the <code><a href="../reference/transform_coord.html">transform_coord()</a></code> function. Use the <code>ggspatial::geom_spatial_*</code> functions when adding data to rotated maps.</p>
</div>
<div id="quick-map" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-map" class="anchor"></a>Quick map</h2>
<p>The <code>qmap</code> function is designed as a shortcut to quickly take a look at a spatial dataset similar to the ggplot’s <a href="https://ggplot2.tidyverse.org/reference/qplot.html"><code>qplot</code></a> function. This function is supposed to automatically detect the type of data fed into the function and plot a map using appropriate geometries, limits, and projection. The function has not been developed properly yet and requires user feedback and testing.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/qmap.html">qmap</a></span>(<span class="no">dt</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span>(<span class="st">"red"</span>)) <span class="co"># set color</span></pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="fu"><a href="../reference/qmap.html">qmap</a></span>(<span class="no">dt</span>, <span class="kw">color</span> <span class="kw">=</span> <span class="no">var</span>) <span class="co"># map color</span></pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-16-2.png" width="700"></p>
</div>
</div>
<div id="advanced-use" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-use" class="anchor"></a>Advanced use</h1>
<p>This section focuses on flexibility and user modifications. It is assumed that advanced users understand the basics of geographic information systems (GIS) and how to use these systems in R (e.g. see the <a href="https://geocompr.robinlovelace.net/adv-map.html">Making Maps with R</a> chapter in <a href="https://geocompr.robinlovelace.net/index.html">Lovelace et al. 2020</a>).</p>
<div id="projections" class="section level2">
<h2 class="hasAnchor">
<a href="#projections" class="anchor"></a>Projections</h2>
<p>The <code>basemap</code> function uses the <code>limits</code> argument to automatically detect the required projection for a map (or the <code>data</code> argument to calculate <code>limits</code>). The algorithms deciding which projection to use are defined in <code>define_shapefiles</code> and <code>shapefile_list</code> functions. These conditions are expected to change during the development of the package and documented information here or in the <code>basemap</code> function might be outdated. Make sure to check the projection definition functions for up-to-date information. At the time of writing, the function uses three different projections (given as <a href="https://epsg.io/">EPSG codes</a>):</p>
<ul>
<li>
<strong>3995</strong> WGS 84 / Arctic Polar Stereographic. Called “ArcticStereographic”. For max latitude (<code>limits[4]</code>) &gt;= 60 (if min latitude (<code>limits[3]</code>) &gt;= 30), and single integer latitudes &gt;= 30 and &lt;= 89.</li>
<li>
<strong>3031</strong> WGS 84 / Antarctic Polar Stereographic. Called “AntarcticStereographic”. For max latitude (<code>limits[4]</code>) &lt;= -60 (if min latitude (<code>limits[3]</code>) &lt;= -30), and single integer latitudes &lt;= -30 and &gt;= -89.</li>
<li>
<strong>4326</strong> WGS 84 / World Geodetic System 1984, used in GPS. Called “DecimalDegree”. For min latitude (<code>limits[3]</code>) &lt; 30 or &gt; -30, max latitude (<code>limits[4]</code>) &lt; 60 or &gt; -60, and single integer latitudes &lt; 30 and &gt; -30.</li>
</ul>
<p>The <code>basemap</code> function uses pre-transformed shapefiles for each of the projections above (defined in <code>shapefile_list</code>). This is to make the plotting quicker and more memory efficient but leads to larger data size required by the package.</p>
</div>
<div id="appearance" class="section level2">
<h2 class="hasAnchor">
<a href="#appearance" class="anchor"></a>Appearance</h2>
<div id="bathymetry-styles" class="section level3">
<h3 class="hasAnchor">
<a href="#bathymetry-styles" class="anchor"></a>Bathymetry styles</h3>
<p>The <code>basemap</code> function contains four pre-made bathymetry styles defined using the <code>bathy.style</code> argument. Two of these alternatives (<code>"poly_*"</code>) have been mapped to <code>fill</code> using the <code>geom_polygon</code> function, while the two others (<code>contour_*</code>) have been mapped to <code>color</code>. The default style (<code>"poly_blues"</code>) has been displayed throughout this user manual. The other styles are:</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">46</span>, <span class="fl">70</span>, <span class="fl">81</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"poly_greys"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">46</span>, <span class="fl">70</span>, <span class="fl">81</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"contour_blues"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-17-2.png" width="700"></p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">46</span>, <span class="fl">70</span>, <span class="fl">81</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"contour_grey"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-17-3.png" width="700"></p>
<div id="customizing-bathymetry-styles" class="section level4">
<h4 class="hasAnchor">
<a href="#customizing-bathymetry-styles" class="anchor"></a>Customizing bathymetry styles</h4>
<p>The <code>bathy.style = "poly_*"</code> bathymetry polygons are mapped to <code>geom_fill_discrete</code> and can be modifying using standard ggplot syntax:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">140</span>, -<span class="fl">105</span>, <span class="fl">20</span>, <span class="fl">40</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>) + <span class="fu">scale_fill_viridis_d</span>(<span class="st">"Water depth (m)"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>The <code>bathy.style = "contour_*"</code> bathymetry lines are mapped to <code>geom_color_discrete</code> and can be modifying using standard ggplot syntax:</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">60</span>, <span class="fl">68</span>, <span class="fl">80</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"contour_blues"</span>) + <span class="fu">scale_color_hue</span>()</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
</div>
<div id="graphical-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#graphical-parameters" class="anchor"></a>Graphical parameters</h3>
<p>The <code>basemap</code> function uses graphical parameters that (very objectively) happen to please the eye of the author and have worked in the applications needed by the author. The default parameters may suddenly change without warning. You may want to modify the appearances of a <code>basemap</code> to your own liking. This can be done using the <code>*.col</code> (fill), <code>*.border.col</code> (line color) and <code>*.size</code> (line width) arguments:</p>
<div class="sourceCode" id="cb22"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">55</span>, <span class="fl">70</span>), <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
        <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"poly_greys"</span>,
        <span class="kw">land.col</span> <span class="kw">=</span> <span class="st">"#eeeac4"</span>, <span class="kw">gla.col</span> <span class="kw">=</span> <span class="st">"cadetblue"</span>,
        <span class="kw">land.border.col</span> <span class="kw">=</span> <span class="fl">NA</span>, <span class="kw">gla.border.col</span> <span class="kw">=</span> <span class="fl">NA</span>,
        <span class="kw">grid.size</span> <span class="kw">=</span> <span class="fl">0.05</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
<p>Grid lines can be removed by setting the <code>grid.col</code> to <code>NA</code>. Axis labels can be manipulated using standard ggplot code:</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">124</span>, <span class="fl">148</span>, <span class="fl">31</span>, <span class="fl">50</span>), <span class="kw">grid.col</span> <span class="kw">=</span> <span class="fl">NA</span>) + <span class="fu">labs</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"Only latitude for you, ..."</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
</div>
<div id="add-scale-bar-and-north-arrow" class="section level3">
<h3 class="hasAnchor">
<a href="#add-scale-bar-and-north-arrow" class="anchor"></a>Add scale bar and north arrow</h3>
<p>Scale bar and north arrows can be added using the <a href="https://paleolimbot.github.io/ggspatial/index.html"><strong>ggspatial</strong> functions</a> (the package is automatically loaded when you use ggOceanMaps):</p>
<div class="sourceCode" id="cb24"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">75</span>, -<span class="fl">45</span>, <span class="fl">62</span>, <span class="fl">78</span>), <span class="kw">rotate</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu">annotation_scale</span>(<span class="kw">location</span> <span class="kw">=</span> <span class="st">"br"</span>) +
  <span class="fu">annotation_north_arrow</span>(<span class="kw">location</span> <span class="kw">=</span> <span class="st">"tr"</span>, <span class="kw">which_north</span> <span class="kw">=</span> <span class="st">"true"</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-22-1.png" width="700"></p>
<p>Note that the north arrow in the example above points towards North where it is placed and that the direction of North varies as shown by the meridians. The scale bar is correct at 71 <span class="math inline">\(\circ\)</span>N latitude as specified by the projection (crs = 3995) for Arctic stereographic maps.</p>
</div>
</div>
<div id="modifying-basemap-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#modifying-basemap-objects" class="anchor"></a>Modifying basemap objects</h2>
<p>The objects produced by the <code>basemap</code> function are standard ggplot objects with the difference that relevant information used in mapping is added to <code>attributes</code> of the object:</p>
<div class="sourceCode" id="cb25"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/basemap.html">basemap</a></span>(-<span class="fl">60</span>)
<span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span>(<span class="no">p</span>)
<span class="co">#&gt; $names</span>
<span class="co">#&gt; [1] "data"        "layers"      "scales"      "mapping"     "theme"      </span>
<span class="co">#&gt; [6] "coordinates" "facet"       "plot_env"    "labels"     </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] "gg"          "ggplot"      "ggOceanMaps"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $bathymetry</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $glaciers</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $limits</span>
<span class="co">#&gt; [1] -3333134  3333134 -3333134  3333134</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $polarmap</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $crs</span>
<span class="co">#&gt; [1] 3031</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $proj</span>
<span class="co">#&gt; [1] "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"</span></pre></body></html></div>
<p>Accessing the <code>attributes</code> allow custom modifications of maps produced by the <code>basemap</code> function. See the <a href="#reordering-layers">Reordering layers</a> section as an example.</p>
<div id="reordering-layers" class="section level3">
<h3 class="hasAnchor">
<a href="#reordering-layers" class="anchor"></a>Reordering layers</h3>
<p>Sometimes there is a need to move land, glacier, and grid layers on top of spatial data added on a <code>basemap</code>. This can be done using the <code>reorder_layers</code> function. This example uses Norwegian fishing regions (Hovedområder f.o.m. 2018), which can be downloaded from the <a href="https://kart.fiskeridir.no/stat">Norwegian Directorate of Fisheries data portal</a> (use “ESRI shapefile” option). The example works for any spatial polygons with crs information, however.</p>
<p>The Norwegian fishing regions are included as an example dataset in the <strong>ggOceanMaps</strong> package. You can download these data and use the <code><a href="https://rdrr.io/pkg/rgdal/man/readOGR.html">rgdal::readOGR</a></code> function to read the shapefile if you wish to follow the example fully.</p>
<div class="sourceCode" id="cb26"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">fishingAreasNor</span>)

<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="no">fishingAreasNor</span>)[<span class="fl">1</span>:<span class="fl">4</span>]) +
  <span class="fu">annotation_spatial</span>(<span class="no">fishingAreasNor</span>, <span class="kw">fill</span> <span class="kw">=</span> <span class="fl">NA</span>) +
  <span class="fu">coord_sf</span>(<span class="kw">expand</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-24-1.png" width="700"></p>
<p>The initial plot draws the polygons. Note how we had to add <code>coord_sf(expand = FALSE)</code> because <code>layer_spatial</code> and <code>annotation_spatial</code> functions from the ggspatial package seem to modify <code>coord_sf</code> when added to the plot. The <code>basemap</code> function uses <code>expand = FALSE</code> (run the script without the addition and see the difference). Note also how the polygon boundaries are partly on land. We want to eventually hide them under land. We also add region labels and color the polygons based on their area to demonstrate the capabilities of ggplot, ggspatial and ggOceanMaps:</p>
<div class="sourceCode" id="cb27"><html><body><pre class="r"><span class="no">labels</span> <span class="kw">&lt;-</span> <span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html">SpatialPointsDataFrame</a></span>(<span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/topo-unary-gCentroid.html">gCentroid</a></span>(<span class="no">fishingAreasNor</span>, <span class="kw">byid</span><span class="kw">=</span><span class="fl">TRUE</span>),
                                     <span class="kw">data</span> <span class="kw">=</span> <span class="no">fishingAreasNor</span>@<span class="kw">data</span>)
<span class="no">labels</span> <span class="kw">&lt;-</span> <span class="fu">df_spatial</span>(<span class="no">labels</span>)

<span class="co"># To correct for a bug in ggspatial 1.1.1</span>
<span class="kw">if</span>(<span class="st">"x_without_geom[df_geom$feature_id, ]"</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">labels</span>)) {
  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">labels</span>)[<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">labels</span>) <span class="kw">==</span> <span class="st">"x_without_geom[df_geom$feature_id, ]"</span>] <span class="kw">&lt;-</span> <span class="st">"FID"</span>
}
<span class="co"># Bug correction end.</span>

<span class="no">fishingAreasNor</span>@<span class="kw">data</span>$<span class="no">area</span> <span class="kw">&lt;-</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/area.html">area</a></span>(<span class="no">fishingAreasNor</span>)/<span class="fl">1e9</span> <span class="co"># calculate area in 1000 km2</span>

<span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="no">fishingAreasNor</span>)[<span class="fl">1</span>:<span class="fl">4</span>]) +
  <span class="fu">annotation_spatial</span>(<span class="no">fishingAreasNor</span>, <span class="fu">aes</span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="no">area</span>)) +
  <span class="fu">geom_spatial_text</span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">labels</span>, <span class="fu">aes</span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">x</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">y</span>, <span class="kw">label</span> <span class="kw">=</span> <span class="no">FID</span>), <span class="kw">size</span> <span class="kw">=</span> <span class="fu"><a href="../reference/FS.html">FS</a></span>(<span class="fl">8</span>), <span class="kw">fontface</span> <span class="kw">=</span> <span class="fl">2</span>) +
  <span class="fu">scale_fill_distiller</span>(<span class="kw">name</span> <span class="kw">=</span> <span class="st">"Area\n(1000 km2)"</span>,
                       <span class="kw">palette</span> <span class="kw">=</span> <span class="st">"Spectral"</span>, <span class="kw">na.value</span> <span class="kw">=</span> <span class="st">"white"</span>,
                       <span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">500</span>), <span class="kw">oob</span> <span class="kw">=</span> <span class="kw pkg">scales</span><span class="kw ns">::</span><span class="no"><a href="https://scales.r-lib.org//reference/oob.html">squish</a></span>)

<span class="fu"><a href="../reference/reorder_layers.html">reorder_layers</a></span>(<span class="no">p</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
<p>Ideally, the region labels should not go under land. This can be fixed by plotting the labels on top of the reordered ggplot object. To demonstrate how to reorder layers, we do this manually here:</p>
<div class="sourceCode" id="cb28"><html><body><pre class="r"><span class="no">p</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/reorder_layers.html">reorder_layers</a></span>(<span class="no">p</span>)
<span class="no">tmp</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span>(<span class="no">p</span>$<span class="no">layers</span>, <span class="kw">function</span>(<span class="no">k</span>) !<span class="fu"><a href="https://rdrr.io/r/base/NULL.html">is.null</a></span>(<span class="no">k</span>$<span class="no">mapping</span>$<span class="no">label</span>)) <span class="co"># the layer with label mapping</span>
<span class="no">p</span>$<span class="no">layers</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="no">p</span>$<span class="no">layers</span>[-<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">tmp</span>)], <span class="no">p</span>$<span class="no">layers</span>[<span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span>(<span class="no">tmp</span>)])
<span class="no">p</span></pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-26-1.png" width="700"></p>
</div>
<div id="custom-shapefiles" class="section level3">
<h3 class="hasAnchor">
<a href="#custom-shapefiles" class="anchor"></a>Custom shapefiles</h3>
<p>The <strong>ggOceanMaps package uses vector (spatial polygon) data</strong> to make the plotting more efficient and to produce sharp images at any resolution. For the time being, the package supports three kinds of shapefiles: 1) land shapes, 2) glacier shapes, and 3) bathymetry shapes. Each of these shapes has to be defined using the same projection. Since the shapefiles are large and generating them may require long processing time, it is most convenient to save them in a Rdata file as <code>sp::SpatialPolygonsDataFrames</code> objects and load them to the memory when used to make a map. Useful sources for spatial data are:</p>
<p><strong>Vector data</strong></p>
<ul>
<li>
<a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">Natural Earth Data</a> provides polygon data in relatively high detail for the entire Earth. Used as data-source for land and glacier shapes throughout the package, except for the most detailed maps.</li>
<li>
<a href="https://www.kartverket.no/en/data/Open-and-Free-geospatial-data-from-Norway/">Norwegian Mapping Authority</a> provides high-resolution spatial data for mainland Norway and Svalbard. <!-- Used as data-source for detailed coastal Norwegian maps as well as for detailed bathymetry in Svalbard maps. -->
</li>
<li>
<a href="https://geodata.npolar.no/">Norwegian Polar Institute</a> provides high-resolution vector data for Norwegian polar regions. <!-- Used as data-source for detailed Svalbard maps.  -->
</li>
</ul>
<p><strong>Raster data for bathymetry</strong></p>
<ul>
<li>
<a href="https://www.gebco.net/data_and_products/gridded_bathymetry_data/gebco_2019/gebco_2019_info.html">GEBCO Compilation Group (2019) GEBCO 2019 15-arcsecond grid</a>. The highest resolution open bathymetry grid available at the moment. Referred to as “GEBCO data”.</li>
<li>
<a href="https://doi.org/10.7289/V5C8276M">ETOPO1 1 Arc-Minute Global Relief Model</a>. Can also be accessed using the <a href="https://www.rdocumentation.org/packages/marmap/versions/1.0.3/topics/getNOAA.bathy"><code><a href="https://rdrr.io/pkg/marmap/man/getNOAA.bathy.html">marmap::getNOAA.bathy</a></code></a> (see <a href="#making">Section 1</a>). Referred to as “NOAA data” and “ETOPO1 data”.</li>
</ul>
<p>There are probably more sources which the author has not needed yet. Please send an email to add more options to the list. The bathymetry datasets are large and require vectorization before they can be plotted in <em>ggplot2</em> within a reasonable time.</p>
<p>Here we go through how to plot customized shapefiles for the Barents Sea as an example. A similar procedure can be applied to any region in the world.</p>
<div id="bathymetries" class="section level4">
<h4 class="hasAnchor">
<a href="#bathymetries" class="anchor"></a>Bathymetries</h4>
<p>The <a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">Natural Earth Data</a> provides bathymetry vector data, which can be readily used in ggOceanMaps. The contours in that dataset are, however, not very practical for marine biology and fisheries in shallow seas such as the Barents Sea. Download the <a href="https://www.ngdc.noaa.gov/mgg/global/relief/ETOPO1/data/ice_surface/grid_registered/netcdf/">ETOPO1 dataset as grid registered NetCDF gmt4</a> to a folder in your computer. It may be beneficial to make a “GIS” or “Shapefiles” folder where you store similar datasets for later use. Whether you use ice or bed-rock surface does not matter for this example as there are no glaciers under the sea-level within the region of interest. In any case, this choice has no visual effect because land and glaciers will be plotted on top of the bathymetry, but the ice surface option will lead to smaller file size.</p>
<p>The bathymetry needs first to be reclassified and formatted for the consequent vectorization step. First, we need to define the location of the ETOPO1 dataset and to find limits for our region in decimal degrees. The limits can be found using the <code>basemap</code> function. It is advised to use slightly wider limits than the region of interest.</p>
<div class="sourceCode" id="cb29"><html><body><pre class="r"><span class="no">etopoPath</span> <span class="kw">&lt;-</span> <span class="st">""</span> <span class="co"># Replace by the path to the folder where the ETOPO1 grd file is located.</span>
<span class="no">lims</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">8</span>, <span class="fl">65</span>, <span class="fl">68</span>, <span class="fl">82</span>)
<span class="no">projection</span> <span class="kw">&lt;-</span> <span class="st">"+init=epsg:32636"</span>
<span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="no">lims</span>)</pre></body></html></div>
<p>We also need to define an appropriate projection. We will use the <a href="http://epsg.io/32636">UTM 36N zone projection</a>, which is approximately in the middle of our area of interest. We define higher resolution contour in depths 0-500 m because our area of interest is relatively shallow. The <code>raster_bathymetry</code> function is relatively slow for large data. The <code>aggregation.factor</code> argument can be used to reduce file size but will influence the resolution of the resulting shapefile (higher factors lead to a lower resolution).</p>
<div class="sourceCode" id="cb30"><html><body><pre class="r"><span class="no">rb</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/raster_bathymetry.html">raster_bathymetry</a></span>(<span class="kw">bathy</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">etopoPath</span>, <span class="st">"ETOPO1_Ice_g_gmt4.grd"</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"/"</span>),
                        <span class="kw">depths</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">50</span>, <span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">300</span>, <span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span>, <span class="fl">2000</span>, <span class="fl">4000</span>, <span class="fl">6000</span>, <span class="fl">10000</span>),
                        <span class="kw">proj.out</span> <span class="kw">=</span> <span class="no">projection</span>,
                        <span class="kw">boundary</span> <span class="kw">=</span> <span class="no">lims</span>
)</pre></body></html></div>
<p>Now we have the bathyRaster object which can be vectorized:</p>
<div class="sourceCode" id="cb31"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">rb</span>)
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">rb</span>)
<span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span>(<span class="no">rb</span>$<span class="no">raster</span>)</pre></body></html></div>
<p>The vectorization is done using the <code>vector_bathymetry</code> function. The <code>drop.crumbs</code> and <code>remove.holes</code> parameters can be used to reduce the file size, while the <code>smooth</code> parameter makes the contours look smoother under high zoom levels. Note that the smoothing of raster cell edges is completely arbitrary and may lead to map contours that do not exist in reality.</p>
<div class="sourceCode" id="cb32"><html><body><pre class="r"><span class="no">bs_bathy</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/vector_bathymetry.html">vector_bathymetry</a></span>(<span class="no">rb</span>)
<span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu">plot</span>(<span class="no">bs_bathy</span>)</pre></body></html></div>
</div>
<div id="land-shapes" class="section level4">
<h4 class="hasAnchor">
<a href="#land-shapes" class="anchor"></a>Land shapes</h4>
<p>Land shapes could theoretically be defined from the bathymetry raster (depth = 0). Nevertheless, since the <a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">10m Natural Earth Data</a> vectors are of high resolution, there has been no need to write a function to do this. We use Natural Earth Data instead. Download the Natural Earth Data <a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">Land and Minor Islands</a> vectors to your “GIS” or “Shapefiles” folder and define folder paths under:</p>
<div class="sourceCode" id="cb33"><html><body><pre class="r"><span class="no">NEDPath</span> <span class="kw">&lt;-</span> <span class="st">""</span> <span class="co"># Natural Earth Data location</span>
<span class="no">outPath</span> <span class="kw">&lt;-</span> <span class="st">""</span> <span class="co"># Data output location</span></pre></body></html></div>
<p>Once done, we go ahead and process the shapefiles:</p>
<div class="sourceCode" id="cb34"><html><body><pre class="r"><span class="no">world</span> <span class="kw">&lt;-</span> <span class="kw pkg">rgdal</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgdal/man/readOGR.html">readOGR</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">NEDPath</span>, <span class="st">"ne_10m_land/ne_10m_land.shp"</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"/"</span>))
<span class="no">islands</span> <span class="kw">&lt;-</span> <span class="kw pkg">rgdal</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgdal/man/readOGR.html">readOGR</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">NEDPath</span>, <span class="st">"ne_10m_minor_islands/ne_10m_minor_islands.shp"</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"/"</span>))
<span class="no">world</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(<span class="no">world</span>, <span class="no">islands</span>)

<span class="no">bs_land</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/clip_shapefile.html">clip_shapefile</a></span>(<span class="no">world</span>, <span class="no">lims</span>)
<span class="no">bs_land</span> <span class="kw">&lt;-</span> <span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html">spTransform</a></span>(<span class="no">bs_land</span>, <span class="kw">CRSobj</span> <span class="kw">=</span> <span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="no">projection</span>))
<span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/pred-unary-gIsValid.html">gIsValid</a></span>(<span class="no">bs_land</span>) <span class="co"># Has to return TRUE, if not use rgeos::gBuffer</span>
<span class="no">bs_land</span> <span class="kw">&lt;-</span> <span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/misc-gBuffer.html">gBuffer</a></span>(<span class="no">bs_land</span>, <span class="kw">byid</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">0</span>)
<span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu">plot</span>(<span class="no">bs_land</span>)</pre></body></html></div>
</div>
<div id="glacier-shapes" class="section level4">
<h4 class="hasAnchor">
<a href="#glacier-shapes" class="anchor"></a>Glacier shapes</h4>
<p>Download the Natural Earth Data <a href="http://www.naturalearthdata.com/downloads/10m-physical-vectors/">Glaciated Areas</a> vectors to your <code>NEDPath</code>.</p>
<div class="sourceCode" id="cb35"><html><body><pre class="r"><span class="no">glaciers</span> <span class="kw">&lt;-</span> <span class="kw pkg">rgdal</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgdal/man/readOGR.html">readOGR</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">NEDPath</span>, <span class="st">"ne_10m_glaciated_areas/ne_10m_glaciated_areas.shp"</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"/"</span>))
<span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/pred-unary-gIsValid.html">gIsValid</a></span>(<span class="no">glaciers</span>) <span class="co"># Needs buffering</span>
<span class="no">glaciers</span> <span class="kw">&lt;-</span> <span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/misc-gBuffer.html">gBuffer</a></span>(<span class="no">glaciers</span>, <span class="kw">byid</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">width</span> <span class="kw">=</span> <span class="fl">0</span>)

<span class="no">bs_glacier</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/clip_shapefile.html">clip_shapefile</a></span>(<span class="no">glaciers</span>, <span class="no">lims</span>)
<span class="no">bs_glacier</span> <span class="kw">&lt;-</span> <span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html">spTransform</a></span>(<span class="no">bs_glacier</span>, <span class="kw">CRSobj</span> <span class="kw">=</span> <span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html">CRS</a></span>(<span class="no">projection</span>))
<span class="kw pkg">rgeos</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/pred-unary-gIsValid.html">gIsValid</a></span>(<span class="no">bs_glacier</span>)
<span class="kw pkg">sp</span><span class="kw ns">::</span><span class="fu">plot</span>(<span class="no">bs_glacier</span>)</pre></body></html></div>
</div>
<div id="plotting-the-shapefiles-using-basemap" class="section level4">
<h4 class="hasAnchor">
<a href="#plotting-the-shapefiles-using-basemap" class="anchor"></a>Plotting the shapefiles using basemap</h4>
<p>Now that we have the shapefiles, we can save them to a file so that we do not run the script above every time we plot a map using custom shapefiles.</p>
<div class="sourceCode" id="cb36"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span>(<span class="no">bs_bathy</span>, <span class="no">bs_land</span>, <span class="no">bs_glacier</span>, <span class="kw">file</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span>(<span class="no">outPath</span>, <span class="st">"bs_shapes.rda"</span>, <span class="kw">sep</span> <span class="kw">=</span> <span class="st">"/"</span>), <span class="kw">compress</span> <span class="kw">=</span> <span class="st">"xz"</span>)</pre></body></html></div>
<p>The shapefiles can now be plotted using the <code>basemap</code> function:</p>
<div class="sourceCode" id="cb37"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">shapefiles</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">land</span> <span class="kw">=</span> <span class="no">bs_land</span>, <span class="kw">glacier</span> <span class="kw">=</span> <span class="no">bs_glacier</span>, <span class="kw">bathy</span> <span class="kw">=</span> <span class="no">bs_bathy</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
<p>The list elements <code>land</code>, <code>glacier</code> and <code>bathy</code> are required, but <code>glacier</code> and <code>bathy</code> can be set to <code>NULL</code> if <code>bathymetry</code> and <code>glaciers</code> are set to <code>FALSE</code>, respectively. This means that you are not forced to define bathymetries and glaciers for your custom shapefile maps if plotting them is not desired. Note how the map becomes plotted outside its actual limits. This issue will hopefully be fixed in the future. The map can be limited using the <code>limits</code> or <code>data</code> arguments as any <code>basemap</code>:</p>
<div class="sourceCode" id="cb38"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">10</span>, <span class="fl">53</span>, <span class="fl">70</span>, <span class="fl">80</span>), <span class="kw">shapefiles</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="kw">land</span> <span class="kw">=</span> <span class="no">bs_land</span>, <span class="kw">glacier</span> <span class="kw">=</span> <span class="no">bs_glacier</span>, <span class="kw">bathy</span> <span class="kw">=</span> <span class="no">bs_bathy</span>), <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">glaciers</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-37-1.png" width="700"></p>
</div>
</div>
</div>
<div id="known-issues" class="section level2">
<h2 class="hasAnchor">
<a href="#known-issues" class="anchor"></a>Known issues</h2>
<div id="antimeridian-date-line-issues" class="section level3">
<h3 class="hasAnchor">
<a href="#antimeridian-date-line-issues" class="anchor"></a>Antimeridian (date-line) issues</h3>
<p>As any decimal degree projection, the ggOceanMaps suffers from the antimeridian issue for regions &lt; 30 and &gt; -30 latitude. Currently, the <code>basemap</code> function plots the entire world instead of the desired region:</p>
<div class="sourceCode" id="cb39"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">160</span>, -<span class="fl">160</span>, <span class="fl">0</span>, <span class="fl">30</span>)) <span class="co"># not evaluated</span></pre></body></html></div>
<p>While this problem has yet to be solved, the projected maps <span class="math inline">\(\geq\)</span> 30 and <span class="math inline">\(\leq\)</span> -30 can tackle with antimeridians:</p>
<div class="sourceCode" id="cb40"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">160</span>, -<span class="fl">160</span>, <span class="fl">30</span>, <span class="fl">60</span>), <span class="kw">rotate</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-39-1.png" width="700"></p>
<p>Note also that limiting the polar stereographic maps using decimal degree longitude <code>limits[1:2]</code> using equal longitudes in decimal degree space (e.g. <code><a href="https://rdrr.io/r/base/c.html">c(90, 90)</a></code>, <code><a href="https://rdrr.io/r/base/c.html">c(-180, 180)</a></code>, …) is equal to limiting a map using latitude argument furthest from the pole. This is because all limit points end up along a single line in angular space. The function automatically corrects for this definition error:</p>
<div class="sourceCode" id="cb41"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(-<span class="fl">180</span>, <span class="fl">180</span>, -<span class="fl">70</span>, -<span class="fl">60</span>))</pre></body></html></div>
<p><img src="ggOceanMaps_files/figure-html/unnamed-chunk-40-1.png" width="700"></p>
</div>
<div id="cannot-add-a-fill-scale-when-using-bathymetry" class="section level3">
<h3 class="hasAnchor">
<a href="#cannot-add-a-fill-scale-when-using-bathymetry" class="anchor"></a>Cannot add a fill scale when using bathymetry</h3>
<div class="sourceCode" id="cb42"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="no">fishingAreasNor</span>)[<span class="fl">1</span>:<span class="fl">4</span>], <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu">annotation_spatial</span>(<span class="no">fishingAreasNor</span>, <span class="fu">aes</span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="no">area</span>))
<span class="co">#&gt; Error: Continuous value supplied to discrete scale</span></pre></body></html></div>
<p>This issue is because ggplot does not allow two color scales with similar mapping in one plot. The issue can be evaded by using contour bathymetry:</p>
<div class="sourceCode" id="cb43"><html><body><pre class="r"><span class="fu"><a href="../reference/basemap.html">basemap</a></span>(<span class="kw">limits</span> <span class="kw">=</span> <span class="kw pkg">raster</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(<span class="no">fishingAreasNor</span>)[<span class="fl">1</span>:<span class="fl">4</span>], <span class="kw">bathymetry</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
        <span class="kw">bathy.style</span> <span class="kw">=</span> <span class="st">"contour_blues"</span>, <span class="kw">legends</span> <span class="kw">=</span> <span class="fl">FALSE</span>) +
  <span class="fu">annotation_spatial</span>(<span class="no">fishingAreasNor</span>, <span class="fu">aes</span>(<span class="kw">fill</span> <span class="kw">=</span> <span class="no">area</span>), <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0.4</span>) +
  <span class="fu">coord_sf</span>(<span class="kw">expand</span> <span class="kw">=</span> <span class="fl">FALSE</span>)</pre></body></html></div>
<p>If you really need the polygon bathymetries, you can use the <a href="https://github.com/eliocamp/ggnewscale">ggnewscale</a> package to make the data <code>fill</code> mapping disconnected from that in <code>basemap</code>.</p>
<!-- ### Other issues -->
<!-- This section is here to remind that the maps do not work as intended yet. The examples here will hopefully disappear over time. The code has not been evaluated. Copy a respective piece of code and see if you can find a solution for it (if you feel like helping). -->
</div>
</div>
</div>
<div id="citations-and-data-sources" class="section level1">
<h1 class="hasAnchor">
<a href="#citations-and-data-sources" class="anchor"></a>Citations and data sources</h1>
<p>The data used by the package are not the property of the Institute of Marine Research nor the author of the package. It is, therefore, important that you cite the data sources used in a map you generate with the package. The spatial data used by this package have been acquired from the following sources:</p>
<ul>
<li>
<strong>Land polygons.</strong> <a href="https://www.naturalearthdata.com/downloads/10m-physical-vectors/">Natural Earth Data</a> 1:10m Physical Vectors with the Land and Minor Island datasets combined. Distributed under the <a href="https://creativecommons.org/publicdomain/">CC Public Domain license</a> (<a href="https://www.naturalearthdata.com/about/terms-of-use/">terms of use</a>).</li>
<li>
<strong>Glacier polygons.</strong> <a href="https://www.naturalearthdata.com/downloads/10m-physical-vectors/">Natural Earth Data</a> 1:10m Physical Vectors with the Glaciated Areas and Antarctic Ice Shelves datasets combined. Distributed under the <a href="https://creativecommons.org/publicdomain/">CC Public Domain license</a> (<a href="https://www.naturalearthdata.com/about/terms-of-use/">terms of use</a>).</li>
<li>
<strong>Bathymetry.</strong> <a href="https://doi.org/10.7289/V5C8276M">Amante, C. and B.W. Eakins, 2009. ETOPO1 1 Arc-Minute Global Relief Model: Procedures, Data Sources and Analysis. NOAA Technical Memorandum NESDIS NGDC-24. National Geophysical Data Center, NOAA</a>. Distributed under the <a href="https://www.usa.gov/government-works">U.S. Government Work license</a>.</li>
</ul>
<p>Please cite the package whenever maps generated by the package are published. For up-to-date citation information, please use:</p>
<div class="sourceCode" id="cb44"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/citation.html">citation</a></span>(<span class="st">"ggOceanMaps"</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; To cite package 'ggOceanMaps' in publications use:</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   Mikko Vihtakari (2020). ggOceanMaps: Plot Data on Oceanographic Maps</span>
<span class="co">#&gt;   using 'ggplot2'. https://mikkovihtakari.github.io/ggOceanMaps,</span>
<span class="co">#&gt;   https://github.com/MikkoVihtakari/ggOceanMaps.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; A BibTeX entry for LaTeX users is</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   @Manual{,</span>
<span class="co">#&gt;     title = {ggOceanMaps: Plot Data on Oceanographic Maps using 'ggplot2'},</span>
<span class="co">#&gt;     author = {Mikko Vihtakari},</span>
<span class="co">#&gt;     year = {2020},</span>
<span class="co">#&gt;     note = {https://mikkovihtakari.github.io/ggOceanMaps, https://github.com/MikkoVihtakari/ggOceanMaps},</span>
<span class="co">#&gt;   }</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mikko Vihtakari.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
